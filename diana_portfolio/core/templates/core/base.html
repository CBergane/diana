{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
	<head>
        <!-- Googlefonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,400;1,400&display=swap" rel="stylesheet">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
        <!-- Swiper -->
        <!-- Swiper CSS -->
        <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">

        <!-- Swiper JS -->
        <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
        <!-- Fontawsome -->
        <script src="https://kit.fontawesome.com/96a4d5e388.js" crossorigin="anonymous"></script>
        <!-- tailwind ccs -->
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
        <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="{% static 'css/style.css' %}" rel="stylesheet">
        <title>{% block title %}{% endblock %} | Diana</title>
	</head>

    <body class="flex flex-col min-h-screen leading-normal tracking-normal">
        <nav class="main-color-bg p-6 sticky -mb-20">
            <div class="max-w-6xl mx-auto py-2 px-6 xl:px-0 items-center flex justify-between">
                <div class="flex-grow"></div> <!-- This empty div will push the menu to the far right -->
                <button id="menuToggle" class="hamburger lg:hidden px-2 py-1 z-50">
    
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
                
            </div>
            <ul id="menu" class="nav-list top-0 left-0 h-full w-full main-color-bg0 text-white transform -translate-x-full invisible overflow-y-auto transition-transform duration-500 lg:static lg:w-auto lg:transform-none lg:bg-transparent lg:flex lg:flex-row z-40 lg:visible">
                <li class="py-2 text-center lg:py-0 uppercase"><a href="{% url 'index' %}" {% if request.resolver_match.url_name == 'index' %}class="active"{% endif %}>HOME</a></li>
                <li class="py-2 text-center lg:py-0 uppercase"><a href="{% url 'biography' %}" {% if request.resolver_match.url_name == 'biography' %}class="active"{% endif %}>BIOGRAPHY</a></li>
                <li class="py-2 text-center lg:py-0 uppercase"><a href="{% url 'services' %}" {% if request.resolver_match.url_name == 'services' %}class="active"{% endif %}>SERVICES</a></li>
                <li class="py-2 text-center lg:py-0 uppercase"><a href="{% url 'portfolio' %}" {% if request.resolver_match.url_name == 'portfolio' %}class="active"{% endif %}>PORTFOLIO</a></li>
                <li class="py-2 text-center lg:py-0 uppercase"><a href="{% url 'index' %}#testimonials-section">TESTIMONIALS</a></li>
                <li class="py-2 text-center lg:py-0 uppercase"><a href="{% url 'clients' %}" {% if request.resolver_match.url_name == 'clients' %}class="active"{% endif %}>CLIENTS/PARTNERS</a></li>
                <li class="py-2 text-center lg:py-0 uppercase"><a href="#" id="contactLink">Contact</a></li>
            </ul>
        </nav>

        <main class="flex-grow lg:mt-[75px]">
            {% block content %}

            {% endblock %}
        </main>

    <footer class="main-color-bg">
        <div class="lg:flex p-6 justify-around">
            <div class="lg:w-1/4 gray-color">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Tenetur odit quaerat explicabo tempore quas placeat harum! Repudiandae unde numquam sapiente atque perspiciatis deserunt natus non, est esse maxime mollitia tempore.</div>
            <div class="lg:w-1/4 gray-color uppercase">Follow
                <div class="p-6 space-y-6 mt-6">
                    <div class="gray-color underline underline-offset-8">
                        <a href="#" class="transition-all duration-500 hover:text-pink-200">
                            Facebook
                        </a>
                    </div>
                    <div class="gray-color underline underline-offset-8">
                        <a href="#" class="transition-all duration-500 hover:text-pink-200">
                            Instagram
                        </a>
                    </div>
                    <div class="gray-color underline underline-offset-8">
                        <a href="#" class="transition-all duration-500 hover:text-pink-200">
                            Linkedin
                        </a>
                    </div>
                </div>
            </div>
            <div class="lg:w-2/4 gray-color pl-6">Where can you find me?
                <div class="p-4">
                    <div class="gray-color">Address:</div>
                    <div class="gray-color">Address:</div>
                    <div class="gray-color underline uppercase pt-10 ml-4">email@mail.com</div>
                </div>
            </div>
        </div>
        <div class="gray-color border-t m-6 p-4">Copywrite</div>
    </footer>

    <!-- LinkedIn Element -->
        <div id="linkedinElement" class="fixed bottom-4 right-4 bg-blue-500 p-2 rounded-full shadow-lg opacity-0 cursor-pointer transition-opacity duration-300">
            <a href="https://www.linkedin.com/in/dianasvensson/" target="_blank" rel="noopener noreferrer">
                <svg xmlns="http://www.w3.org/2000/svg" height="3em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg>
            </a>
        </div>

    <!-- Modal -->
        <div id="contactModal" class="fixed top-0 left-0 w-full h-full flex items-center justify-center opacity-0 transform -translate-y-full pointer-events-none transition-transform transition-opacity duration-700 ease-out z-50">
            <div class="pink-color-bg mt-20 p-4 md:p-6 rounded-lg w-full md:w-1/2 max-h-[90vh] overflow-auto">
                <h2 class="text-2xl uppercase md:text-xl mb-4">Contact Me</h2>
                <form id="contactForm" method="POST" data-csrf="{{ csrf_token }}">
                    {% csrf_token %}
                    <div class="mb-4">
                        <label class="block text-gray-700 text-base md:text-sm font-bold mb-2" for="name">Name</label>
                        <input name="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight" id="name" type="text" placeholder="John Doe">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-base md:text-sm font-bold mb-2" for="companyName">Company Name</label>
                        <input name="companyName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight" id="companyName" type="text" placeholder="XYZ Corp.">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-base md:text-sm font-bold mb-2" for="email">Email</label>
                        <input name="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight" id="email" type="email" placeholder="john@example.com">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-base md:text-sm font-bold mb-2" for="phoneNumber">Phone Number</label>
                        <input name="phoneNumber" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight" id="phoneNumber" type="tel" placeholder="+1 123 456 7890">
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 text-base md:text-sm font-bold mb-2" for="message">Message</label>
                        <textarea name="message" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight" id="message" placeholder="Your message..."></textarea>
                    </div>
                    <div class="flex items-center justify-between">
                        <button class="dark-gray-color py-3 px-4 border rounded text-base" type="submit">Send Message</button>
                        <button class="text-gray-700 hover:text-gray-900 py-3 px-4" type="button" id="closeModal">Close</button>
                    </div>
                </form>                
            </div>
        </div>

        <script src="{% static 'js/main.js' %}"></script>
        <script src="{% static 'js/form.js' %}"></script>
        <script src="{% static 'js/carousel.js' %}"></script>
        <script src="https://unpkg.com/htmx.org@1.9.4" integrity="sha384-zUfuhFKKZCbHTY6aRR46gxiqszMk5tcHjsVFxnUo8VMus4kHGVdIYVbOYYNlKmHV" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script src="https://kit.fontawesome.com/96a4d5e388.js" crossorigin="anonymous"></script>

        <!-- My custom JavaScript -->
        <!-- <script>
            document.addEventListener("DOMContentLoaded", function () {
                const linkedinElement = document.getElementById('linkedinElement');
                const showLinkedinElementAt = 0.8; // Show LinkedIn Element at 80% scroll
                const body = document.body;
                const html = document.documentElement;
        
                window.addEventListener('scroll', function () {
                    const documentHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);
                    const windowHeight = window.innerHeight || html.clientHeight || body.clientHeight;
                    const windowBottom = windowHeight + window.pageYOffset;
        
                    if (windowBottom >= documentHeight * showLinkedinElementAt) {
                        linkedinElement.style.opacity = '1';
                        linkedinElement.classList.add('bounce');
                    } else {
                        linkedinElement.style.opacity = '0';
                        linkedinElement.classList.remove('bounce');
                    }
                });
            });
        </script>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.getElementById('contactForm').addEventListener('submit', function (e) {
                    e.preventDefault();

                    let data = new FormData(this);

                    fetch('/contact/', {
                        method: 'POST',
                        body: data,
                        headers: {
                            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                        }
                    })
                        .then(response => {
                            if (!response.ok) {
                                return response.text().then(text => {
                                    console.error('Server Response:', text); // Log the actual response text from the server
                                    throw new Error('Server Error');
                                });
                            }
                            return response.json();
                        })
                        .then(data => {
                            if (data.status === 'success') {
                                alert('Email sent successfully!');
                                closeModal(); // Close the modal on success
                            } else {
                                alert('Error sending email: ' + (data.error || 'Unknown Error'));
                            }
                        })
                        .catch(error => {
                            console.error('Error during fetch operation: ', error);
                            alert('Error sending email: ' + error.message);
                        });
                });

                // Function to close the modal
                function closeModal() {
                    let modal = document.getElementById('contactModal');
                    modal.style.opacity = '0';
                    modal.style.pointerEvents = 'none';
                    modal.style.transform = 'translateY(-100%)';
                }
            });
        </script>

        <script>
            function toggleMenu() {
                var menu = document.getElementById('menu');
                var hamburger = document.getElementById('menuToggle');
                
                if (menu.classList.contains('invisible')) {
                    menu.classList.remove('invisible');
                    hamburger.classList.add('active'); // Add the active class to the hamburger
                    setTimeout(function() {
                        menu.classList.add('translate-x-0');
                    }, 50);
                } else {
                    menu.classList.remove('translate-x-0');
                    hamburger.classList.remove('active'); // Remove the active class from the hamburger
                    setTimeout(function() {
                        menu.classList.add('invisible');
                    }, 500);
                }
            }

            document.getElementById('menuToggle').addEventListener('click', toggleMenu);
            document.getElementById('menuClose').addEventListener('click', toggleMenu);
        </script>

        <script>
            document.addEventListener("DOMContentLoaded", function() {
                // Initialize AOS
                AOS.init({
                    once: false,
                });
        
                // Initialize Swiper
                const swiper = new Swiper('.swiper-container', {
                    // Optional parameters
                    direction: 'horizontal',
                    loop: true,
                    autoplay: {
                        delay: 5000, //5 seconds
                    },
        
                    // If you need pagination
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
        
                    // Navigation arrows
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
                });
            });
        </script>
        <script>
            const contactLink = document.getElementById('contactLink');
            const contactModal = document.getElementById('contactModal');
            const closeModal = document.getElementById('closeModal');

            contactLink.addEventListener('click', function(event) {
                event.preventDefault();

                // Only toggle the menu on mobile screens
                if (window.innerWidth <= 768) {
                    var menu = document.getElementById('menu');
                    if (!menu.classList.contains('invisible')) {
                        toggleMenu();
                    }
                }

                contactModal.style.opacity = "1";
                contactModal.style.transform = "translateY(0)";
                contactModal.style.pointerEvents = "auto";
            });


            closeModal.addEventListener('click', function() {
                contactModal.style.opacity = "0";
                contactModal.style.transform = "translateY(-100%)";
                // Set pointer events to none after the transition completes
                setTimeout(() => {
                    contactModal.style.pointerEvents = "none";
                }, 700);
            });


        </script>
        <script>
            contactForm.addEventListener('submit', function(event) {
                event.preventDefault();
                
                const formData = {
                    name: document.getElementById('name').value,
                    companyName: document.getElementById('companyName').value,
                    email: document.getElementById('email').value,
                    phoneNumber: document.getElementById('phoneNumber').value,
                    message: document.getElementById('message').value,
                };

                fetch("{% url 'send_contact_email' %}", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'X-CSRFToken': '{{ csrf_token }}'
                    },
                    body: new URLSearchParams(formData)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === "success") {
                        // You can show a success message or do something else
                        console.log("Email sent successfully!");
                    } else {
                        console.error("Error sending email:", data.error);
                    }
                });
            });
        </script> -->
        
</body>
</html>